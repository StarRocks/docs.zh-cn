# JSON 谓词

## 功能

JSON 类型支持谓词计算，作为 WHERE 子句进行数据过滤。

## 语法

- `JSON < JSON`
- `JSON <= JSON`
- `JSON > JSON`
- `JSON >= JSON`
- `JSON = JSON`
- `JSON != JSON`

## 参数说明

运算符两边都需要是 JSON 类型。

## 返回值说明

JSON 的比较运算符遵循以下规则：

1. 如果运算符两边类型相同，且都是基本类型（Number/String/Boolean)，遵循基本类型的运算规则
2. 如果运算符两边类型相同，且是复合类型(Object, Array)，按照元素逐个比较
3. 如果运算符两边类型不同，则按照类型顺序比较，当前的类型顺序是: `Null < Bool < Array < Object < Double < Integer < String`

举例来说，`{"a": 1, "c": 2}` 和 `{"b": 1, "a": 2}` 的比较规则如下：

1. 定义 `left = {"a": 1, "c": 2}`, `right = {"b": 1, "a": 2}`
2. 遍历 left 的所有字段，并在 right 查找
3. 对于字段 `a`: 在 right 能找到，且其值 `1 < 2` ；则返回结果 `left < right`

而对于 `{"a": 1, "c": 2}` 和 `{"b": 1, "a": 1}` 来说，其比较规则如下：

1. 定义 `left = {"a": 1, "c": 2}`, `right = {"b": 1, "a": 1}`
2. 对比字段 `a`, 其值相同，都是 `1`
3. 对比字段 `c`，在 right 中不存在，因此返回 `left > right`

## 示例

```sql
-- 数值类型比较
mysql> select * from tj where j->'a' <= parse_json('3');
+------+----------------------+
| id   | j                    |
+------+----------------------+
|    3 | {"a": 3, "b": true}  |
|    1 | {"a": 1, "b": true}  |
|    2 | {"a": 2, "b": false} |
+------+----------------------+

-- 字符串类型比较
mysql> select parse_json('"a"') < parse_json('"b"');
+---------------------------------------+
| parse_json('"a"') < parse_json('"b"') |
+---------------------------------------+
|                                     1 |
+---------------------------------------+

```

## 关键词

JSON、Predicate
