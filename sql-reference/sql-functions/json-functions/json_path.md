# JSON Path

## 功能

查询 JSON 对象的语言。当前 Starrocks 实现了 SQL/JSONPath 语法子集，支持的语法如下。

- 嵌套对象查询: `$.a.b.c`, 可以查询嵌套多层的 JSON Object
- 数组元素查询：`$.a[1]`, 可以查询某个数组元素
- 数组片段：`$.a[1:3]`, 查询数组中的多个元素，返回JSON Array
- 数组提取：`$.a[*].b`，可以提取数组中的对象

## 注意事项

当前实现的 JSON Path 没有完全遵循 SQL/JSONPath 标准，明确支持的语法可参考此文档，其余语法不支持。

## 示例

```sql

-- 查询嵌套对象
mysql> select json_query(parse_json('{"a": {"b": 1}}'), '$.a.b');
+----------------------------------------------------+
| json_query(parse_json('{"a": {"b": 1}}'), '$.a.b') |
+----------------------------------------------------+
| 1                                                  |
+----------------------------------------------------+

-- 查询某个数组元素
mysql> select json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[0]');
+------------------------------------------------------------------+
| json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[0]') |
+------------------------------------------------------------------+
| {"b": 1}                                                         |
+------------------------------------------------------------------+

-- 对数组元素进一步提取
mysql> select json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[0].b');
+--------------------------------------------------------------------+
| json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[0].b') |
+--------------------------------------------------------------------+
| 1                                                                  |
+--------------------------------------------------------------------+


-- 查询多个数组元素
mysql> select json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[*].b');
+--------------------------------------------------------------------+
| json_query(parse_json('{"a": [{"b": 1}, {"b": 2}] }'), '$.a[*].b') |
+--------------------------------------------------------------------+
| [1, 2]                                                             |
+--------------------------------------------------------------------+

-- 查询数组切片，并提取字段
mysql> select json_query(parse_json('{"a": [{"b": 1}, {"b": 2}, {"b": 3}] }'), '$.a[1:3].b');
+--------------------------------------------------------------------------------+
| json_query(parse_json('{"a": [{"b": 1}, {"b": 2}, {"b": 3}] }'), '$.a[1:3].b') |
+--------------------------------------------------------------------------------+
| [2, 3]                                                                         |
+--------------------------------------------------------------------------------+
```

## 关键词

JSON、JSON_PATH
